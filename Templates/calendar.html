<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title></title>

    <meta name="robots" content="noindex, nofollow">

    <!-- jQuery CDN -->
    <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>

    <!-- Bootstrap CDN -->
    <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.0.2/css/bootstrap.min.css">
    <script src="//netdna.bootstrapcdn.com/bootstrap/3.0.2/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="/static/custom.css">

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="//oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="//oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->

    <!-- Zabuto Calendar -->
    <script src="../static/zabuto_calendar.js"></script>
    <link rel="stylesheet" type="text/css" href="../static/zabuto_calendar.css">

</head>
<body>
<h3>Book an appointment</h3>
<div class="row">
    <div class="col">

        <div id="my-calendar"></div>

            <script type="application/javascript">
                    $(document).ready(function () {
                        $("#my-calendar").zabuto_calendar({
                            action: function () {
                                console.log(this)
                                return myDateFunction(this.attr('date'), false);

                            },
                            action_nav: function () {
                                return myNavFunction(this.id);
                            }
                        });
                    });

                    function myDateFunction(id) {
                        var date = $("#" + id).data("date");
                        console.log("id= " + id)
                        var dateList = date.split("-");
                        var year = dateList[0];
                        var month = dateList[1];
                        var day = dateList[2];

                        console.log(date)
                        move(year, month, day)
                        return true;
                    }

                    function move(year, month, day){
                        window.location = "/reservations/available_appointments/?" + "year="+ year +
                                "&month=" +month+ "&day=" + day;
                    }

                    function myNavFunction(id) {
                        $("#date-popover").hide();
                        var nav = $("#" + id).data("navigation");
                        var to = $("#" + id).data("to");
                        console.log('nav ' + nav + ' to: ' + to.month + '/' + to.year);
                    }
            </script>
    </div>
</div>
</body>
</html>